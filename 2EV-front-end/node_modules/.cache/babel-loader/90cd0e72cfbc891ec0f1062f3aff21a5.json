{"ast":null,"code":"import _toConsumableArray from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/thienan/Desktop/2EV-front-end/2EV-front-end/src/views/BookingPage/BookingPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\"; // nodejs library that concatenates classes\n\nimport classNames from \"classnames\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector } from \"react-redux\"; // core components\n\nimport Header from \"components/Header/Header.js\";\nimport Footer from \"components/Footer/Footer.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\nimport Parallax from \"components/Parallax/Parallax.js\";\nimport styles from \"assets/jss/material-kit-react/views/landingPage.js\";\nimport logo from \"assets/img/badge.png\";\nimport Calendar from \"components/Calendar/Calendar\";\nvar API_BASE = \"http://localhost:8080\";\nvar dashboardRoutes = [];\nvar useStyles = makeStyles(styles);\nvar paraStyle = {\n  display: \"inline\"\n};\n\nvar BookingPage = function BookingPage(props) {\n  var classes = useStyles();\n\n  var rest = _extends({}, props);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      events = _useState2[0],\n      setEvents = _useState2[1];\n\n  var token = useSelector(function (state) {\n    return state.user.token;\n  });\n  useEffect(function () {\n    var fetchEvents =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var url, result, _ref2, appointments, newEvents;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = \"\".concat(API_BASE, \"/booking\");\n                _context.next = 3;\n                return fetch(url, {\n                  method: \"GET\",\n                  headers: {\n                    Authorization: token,\n                    \"Content-Type\": \"application/json\"\n                  }\n                });\n\n              case 3:\n                result = _context.sent;\n                _context.next = 6;\n                return result.json();\n\n              case 6:\n                _ref2 = _context.sent;\n                appointments = _ref2.appointments;\n                newEvents = appointments.map(function (_ref3) {\n                  var title = _ref3.title,\n                      end = _ref3.end,\n                      start = _ref3.start,\n                      number = _ref3.number,\n                      name = _ref3.name;\n                  return {\n                    title: title,\n                    end: end,\n                    start: start,\n                    number: number,\n                    name: name\n                  };\n                });\n                setEvents(newEvents);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchEvents() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchEvents();\n  }, []); // event for creating appointments\n\n  var postEvent =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(event) {\n      var url, result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"EVENT => \", event);\n              url = \"\".concat(API_BASE, \"/booking/create\");\n              _context2.prev = 2;\n              _context2.next = 5;\n              return fetch(url, {\n                method: \"POST\",\n                body: JSON.stringify(_objectSpread({}, event)),\n                headers: {\n                  Authorization: token,\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n\n            case 5:\n              result = _context2.sent;\n              setEvents([].concat(_toConsumableArray(events), [event]));\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 9]]);\n    }));\n\n    return function postEvent(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Header, Object.assign({\n    color: \"transparent\",\n    routes: dashboardRoutes,\n    logo: logo,\n    brand: \"Photo by Kevin\",\n    rightLinks: React.createElement(HeaderLinks, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }),\n    fixed: true,\n    changeColorOnScroll: {\n      height: 400,\n      color: \"white\"\n    }\n  }, rest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), React.createElement(Parallax, {\n    filter: true,\n    image: require(\"assets/img/bg9.jpg\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(GridContainer, {\n    name: \"titleText\"\n    /*style={titleStyle}*/\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: classes.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Book your appointment online.\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    style: paraStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"See what\", \"'\", \"s available and request your appointent now.\"))))), React.createElement(\"div\", {\n    className: classNames(classes.main, classes.mainRaised),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(GridContainer, {\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      margin: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Calendar, {\n    events: events,\n    onChange: function onChange(e) {\n      return postEvent(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })))))), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }));\n};\n\nexport default BookingPage;","map":{"version":3,"sources":["/Users/thienan/Desktop/2EV-front-end/2EV-front-end/src/views/BookingPage/BookingPage.js"],"names":["React","useState","useEffect","classNames","makeStyles","useSelector","Header","Footer","GridContainer","GridItem","Button","HeaderLinks","Parallax","styles","logo","Calendar","API_BASE","dashboardRoutes","useStyles","paraStyle","display","BookingPage","props","classes","rest","events","setEvents","token","state","user","fetchEvents","url","fetch","method","headers","Authorization","result","json","appointments","newEvents","map","title","end","start","number","name","postEvent","event","console","log","body","JSON","stringify","height","color","require","container","main","mainRaised","margin","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n// nodejs library that concatenates classes\nimport classNames from \"classnames\";\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector } from \"react-redux\";\n// core components\nimport Header from \"components/Header/Header.js\";\nimport Footer from \"components/Footer/Footer.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\nimport Parallax from \"components/Parallax/Parallax.js\";\n\nimport styles from \"assets/jss/material-kit-react/views/landingPage.js\";\nimport logo from \"assets/img/badge.png\";\nimport Calendar from \"components/Calendar/Calendar\";\n\nconst API_BASE = \"http://localhost:8080\";\n\nconst dashboardRoutes = [];\n\nconst useStyles = makeStyles(styles);\n\nconst paraStyle = {\n  display: \"inline\"\n};\n\nconst BookingPage = props => {\n  const classes = useStyles();\n  const { ...rest } = props;\n  const [events, setEvents] = useState([]);\n  const token = useSelector(state => state.user.token);\n\n  useEffect(() => {\n    const fetchEvents = async () => {\n      const url = `${API_BASE}/booking`;\n      const result = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      const { appointments } = await result.json();\n      const newEvents = appointments.map(\n        ({ title, end, start, number, name }) => ({\n          title,\n          end,\n          start,\n          number,\n          name\n        })\n      );\n      setEvents(newEvents);\n    };\n    fetchEvents();\n  }, []);\n\n  // event for creating appointments\n  const postEvent = async event => {\n    console.log(\"EVENT => \", event);\n    const url = `${API_BASE}/booking/create`;\n    try {\n      const result = await fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ ...event }),\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      setEvents([...events, event]);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <div>\n      <Header\n        color=\"transparent\"\n        routes={dashboardRoutes}\n        logo={logo}\n        brand=\"Photo by Kevin\"\n        rightLinks={<HeaderLinks />}\n        fixed\n        changeColorOnScroll={{\n          height: 400,\n          color: \"white\"\n        }}\n        {...rest}\n      />\n      <Parallax\n        filter\n        image={require(\"assets/img/bg9.jpg\")}\n      >\n        <div className={classes.container}>\n          <GridContainer name=\"titleText\" /*style={titleStyle}*/>\n            <GridItem xs={12} sm={12} md={6}>\n              <h1 className={classes.title}>Book your appointment online.</h1>\n              <br></br>\n              <h4 style={paraStyle}>\n                See what{\"'\"}s available and request your appointent now.\n              </h4>\n            </GridItem>\n          </GridContainer>\n        </div>\n      </Parallax>\n      <div className={classNames(classes.main, classes.mainRaised)}>\n        <div className={classes.container}>\n          <GridContainer justify=\"center\">\n            <GridItem xs={12} sm={12} md={12}>\n              <div style={{ margin: 16 }}>\n                <Calendar events={events} onChange={e => postEvent(e)} />\n              </div>\n            </GridItem>\n          </GridContainer>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default BookingPage;\n"]},"metadata":{},"sourceType":"module"}